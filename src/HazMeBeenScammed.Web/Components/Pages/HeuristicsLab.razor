@page "/heuristics-lab"
@rendermode InteractiveServer

<PageTitle>Scam Detection Lab</PageTitle>

<div class="lab-hero">
    <h1>Scam Detection Lab</h1>
    <p>
        A scientific field guide to how this app detects sketchy Ethereum behavior,
        explained like you are five where it helps ğŸ§ªğŸ§ .
    </p>
</div>

<div class="lab-layout">
    <section class="lab-card">
        <h2>Method</h2>
        <ul>
            <li><strong>Heuristics</strong> = quick pattern alarms âš¡</li>
            <li><strong>Verifiable on-chain checks</strong> = provable evidence from chain data ğŸ§¾</li>
        </ul>
        <p>
            Score model:
            <code>finalScore = heuristicScore * 0.45 + verifiableScore * 0.55</code>
        </p>
        <p>
            ELI5: your friend says "hmm weird" and the camera confirms it.
            We trust the camera a bit more ğŸ“·
        </p>
    </section>

    <section class="lab-card">
        <h2>Verdict Bands</h2>
        <div class="verdict-grid">
            <div class="verdict verdict-clean">
                <strong>0-14</strong>
                <span>Clean âœ…</span>
            </div>
            <div class="verdict verdict-suspicious">
                <strong>15-39</strong>
                <span>Suspicious âš ï¸</span>
            </div>
            <div class="verdict verdict-likely">
                <strong>40-69</strong>
                <span>Likely Scam ğŸš¨</span>
            </div>
            <div class="verdict verdict-confirmed">
                <strong>70-100</strong>
                <span>Confirmed Scam â˜ ï¸</span>
            </div>
        </div>
    </section>

    <section class="lab-card">
        <h2>Signal Matrix (Science + ELI5)</h2>
        <div class="lab-matrix-wrap">
            <table class="lab-matrix">
                <thead>
                    <tr>
                        <th>Signal</th>
                        <th>Scientific Test</th>
                        <th>ELI5</th>
                        <th>Type</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td>Counterparty concentration</td>
                        <td>Top counterparties > 60% of interactions.</td>
                        <td>All candy keeps going to one kid ğŸ¬</td>
                        <td><span class="lab-tag tag-heuristic">Heuristic</span></td>
                    </tr>
                    <tr>
                        <td>Wallet age anomaly</td>
                        <td>Wallet younger than 7 days with high-value transfers.</td>
                        <td>Brand-new account acting rich on day one ğŸ­</td>
                        <td><span class="lab-tag tag-heuristic">Heuristic</span></td>
                    </tr>
                    <tr>
                        <td>Failed transaction spike</td>
                        <td>Failure ratio above 40% over recent activity.</td>
                        <td>Someone keeps trying wrong keys ğŸ”‘</td>
                        <td><span class="lab-tag tag-heuristic">Heuristic</span></td>
                    </tr>
                    <tr>
                        <td>Proxy upgradeability risk</td>
                        <td>Read EIP-1967 implementation slot and verify implementation code.</td>
                        <td>Check if the puppet has a hidden puppeteer ğŸ</td>
                        <td><span class="lab-tag tag-verified">Verifiable</span></td>
                    </tr>
                    <tr>
                        <td>Approval -> drain correlation</td>
                        <td>Approval event followed by rapid outflow in a short time window.</td>
                        <td>You gave a key, toys disappeared fast ğŸ—ï¸â¡ï¸ğŸ•³ï¸</td>
                        <td><span class="lab-tag tag-verified">Verifiable</span></td>
                    </tr>
                    <tr>
                        <td>Event log anomaly</td>
                        <td>Successful call but missing expected approval/transfer-style logs.</td>
                        <td>Receipt says paid, scanner never beeped ğŸ§¾</td>
                        <td><span class="lab-tag tag-verified">Verifiable</span></td>
                    </tr>
                    <tr>
                        <td>Bytecode similarity risk</td>
                        <td>Code shape and size resemble known drainer templates.</td>
                        <td>Same costume, same villain moves ğŸ¦¹</td>
                        <td><span class="lab-tag tag-verified">Verifiable</span></td>
                    </tr>
                </tbody>
            </table>
        </div>
        <p class="lab-footnote">
            Example RPC proof primitives: <code>eth_getCode</code>, <code>eth_getStorageAt</code>, <code>eth_getTransactionReceipt</code>
        </p>
    </section>

    <section class="lab-card">
        <h2>Confidence and Evidence</h2>
        <p>Each indicator stores confidence and chain evidence.</p>
        <ul>
            <li><strong>Low</strong>: weak clue ğŸ¤</li>
            <li><strong>Medium</strong>: useful clue ğŸ§©</li>
            <li><strong>High</strong>: strong clue ğŸ¯</li>
            <li><strong>Verified</strong>: chain-proven fact ğŸ“Œ</li>
        </ul>
        <p>
            Evidence examples: tx hash, selector, storage slot, log topic, contract address.
        </p>
    </section>

    <section class="lab-card">
        <h2>Engine Pipeline</h2>
        <ol>
            <li>Fetch transactions and contract metadata.</li>
            <li>Run fast heuristics.</li>
            <li>Run on-chain verification calls.</li>
            <li>Attach confidence + evidence.</li>
            <li>Compute weighted score and verdict.</li>
            <li>Stream progress and deep counterparty analysis.</li>
        </ol>
        <p>ELI5: quick look -> detective look -> microscope look ğŸ”ğŸ•µï¸â€â™‚ï¸ğŸ”¬</p>
    </section>
</div>
